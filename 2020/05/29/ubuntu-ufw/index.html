<!DOCTYPE html><html lang="[&quot;zh-cn&quot;,&quot;en&quot;,&quot;default&quot;]" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>ubuntu防火墙常用命令 | 码上相逢无纸笔</title><meta name="description" content="ubuntu中管理防火墙的常用命令"><meta name="keywords" content="ubuntu,防火墙"><meta name="author" content="码聚"><meta name="copyright" content="码聚"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="ubuntu防火墙常用命令"><meta name="twitter:description" content="ubuntu中管理防火墙的常用命令"><meta name="twitter:image" content="https://images.unsplash.com/photo-1524741978410-350ba91a70d7?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1259&amp;q=80"><meta property="og:type" content="article"><meta property="og:title" content="ubuntu防火墙常用命令"><meta property="og:url" content="https://liaoyu.online/2020/05/29/ubuntu-ufw/"><meta property="og:site_name" content="码上相逢无纸笔"><meta property="og:description" content="ubuntu中管理防火墙的常用命令"><meta property="og:image" content="https://images.unsplash.com/photo-1524741978410-350ba91a70d7?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1259&amp;q=80"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="https://liaoyu.online/2020/05/29/ubuntu-ufw/"><link rel="prev" title="安装好jupyterhub后， 该如何安装我们需要的 ipython kernel 呢" href="https://liaoyu.online/2020/06/09/install-jupyter-python-kernel/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/gitalk/dist/gitalk.min.css"><script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script><script src="https://cdn.jsdelivr.net/npm/blueimp-md5/js/md5.min.js"></script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://liaoyu.online","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: undefined,
  ClickShowText: {"text":"人,法,地,地,法,天,天,法,道,道,法,自,然","fontSize":"30px"},
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/myphoto.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">3</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">Tags</div><div class="length_num">9</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">Categories</div><div class="length_num">2</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 类别</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 网站链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 收藏</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#查看防火墙版本"><span class="toc-number">1.</span> <span class="toc-text">查看防火墙版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查看防火墙状态"><span class="toc-number">2.</span> <span class="toc-text">查看防火墙状态</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#开启防火墙"><span class="toc-number">3.</span> <span class="toc-text">开启防火墙</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#关闭防火墙"><span class="toc-number">4.</span> <span class="toc-text">关闭防火墙</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#默认允许外部访问本机"><span class="toc-number">5.</span> <span class="toc-text">默认允许外部访问本机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#默认拒绝外部访问本机"><span class="toc-number">6.</span> <span class="toc-text">默认拒绝外部访问本机</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#允许外部访问443端口"><span class="toc-number">7.</span> <span class="toc-text">允许外部访问443端口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#拒绝外部访问443端口"><span class="toc-number">8.</span> <span class="toc-text">拒绝外部访问443端口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#允许某个IP地址访问本机所有端口"><span class="toc-number">9.</span> <span class="toc-text">允许某个IP地址访问本机所有端口</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ufw详细说明"><span class="toc-number">10.</span> <span class="toc-text">ufw详细说明</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://images.unsplash.com/photo-1524741978410-350ba91a70d7?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1259&amp;q=80)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">码上相逢无纸笔</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 类别</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 网站链接</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于我</span></a></div><div class="menus_item"><a class="site-page"><i class="fa-fw fa fa-list" aria-hidden="true"></i><span> 收藏</span><i class="fa fa-chevron-down menus-expand" aria-hidden="true"></i></a><ul class="menus_item_child"><li><a class="site-page" href="/music/"><i class="fa-fw fa fa-music"></i><span> 音乐</span></a></li><li><a class="site-page" href="/movies/"><i class="fa-fw fa fa-film"></i><span> 电影</span></a></li></ul></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">ubuntu防火墙常用命令</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="Created 2020-05-29 14:37:43"><i class="fa fa-calendar" aria-hidden="true"></i> Created 2020-05-29</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="Updated 2021-06-09 17:22:24"><i class="fa fa-history" aria-hidden="true"></i> Updated 2021-06-09</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/linux/">linux</a></span></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>Post View:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>Comments:</span><a href="/2020/05/29/ubuntu-ufw/#post-comment"><span class="gitalk-comment-count comment-count"></span></a></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h2 id="查看防火墙版本"><a href="#查看防火墙版本" class="headerlink" title="查看防火墙版本"></a>查看防火墙版本</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw version</span><br></pre></td></tr></table></figure>

<h2 id="查看防火墙状态"><a href="#查看防火墙状态" class="headerlink" title="查看防火墙状态"></a>查看防火墙状态</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw status</span><br></pre></td></tr></table></figure>
<h2 id="开启防火墙"><a href="#开启防火墙" class="headerlink" title="开启防火墙"></a>开启防火墙</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw <span class="built_in">enable</span></span><br></pre></td></tr></table></figure>
<h2 id="关闭防火墙"><a href="#关闭防火墙" class="headerlink" title="关闭防火墙"></a>关闭防火墙</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw <span class="built_in">disable</span></span><br></pre></td></tr></table></figure>
<h2 id="默认允许外部访问本机"><a href="#默认允许外部访问本机" class="headerlink" title="默认允许外部访问本机"></a>默认允许外部访问本机</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw default allow</span><br></pre></td></tr></table></figure>
<h2 id="默认拒绝外部访问本机"><a href="#默认拒绝外部访问本机" class="headerlink" title="默认拒绝外部访问本机"></a>默认拒绝外部访问本机</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw default deny</span><br></pre></td></tr></table></figure>
<h2 id="允许外部访问443端口"><a href="#允许外部访问443端口" class="headerlink" title="允许外部访问443端口"></a>允许外部访问443端口</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow 443</span><br></pre></td></tr></table></figure>
<h2 id="拒绝外部访问443端口"><a href="#拒绝外部访问443端口" class="headerlink" title="拒绝外部访问443端口"></a>拒绝外部访问443端口</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw deny 443</span><br></pre></td></tr></table></figure>
<h2 id="允许某个IP地址访问本机所有端口"><a href="#允许某个IP地址访问本机所有端口" class="headerlink" title="允许某个IP地址访问本机所有端口"></a>允许某个IP地址访问本机所有端口</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow from 192.168.0.1</span><br></pre></td></tr></table></figure>
<h2 id="ufw详细说明"><a href="#ufw详细说明" class="headerlink" title="ufw详细说明"></a>ufw详细说明</h2><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br></pre></td><td class="code"><pre><span class="line">UFW:(8)                                                                                February 2016                                                                               UFW:(8)</span><br><span class="line"></span><br><span class="line">NAME</span><br><span class="line">       ufw - program <span class="keyword">for</span> managing a netfilter firewall</span><br><span class="line"></span><br><span class="line">DESCRIPTION</span><br><span class="line">       This program is <span class="keyword">for</span> managing a Linux firewall and aims to provide an easy to use interface <span class="keyword">for</span> the user.</span><br><span class="line"></span><br><span class="line">USAGE</span><br><span class="line">       ufw [--dry-run] <span class="built_in">enable</span>|<span class="built_in">disable</span>|reload</span><br><span class="line"></span><br><span class="line">       ufw [--dry-run] default allow|deny|reject [incoming|outgoing|routed]</span><br><span class="line"></span><br><span class="line">       ufw [--dry-run] logging on|off|LEVEL</span><br><span class="line"></span><br><span class="line">       ufw [--dry-run] reset</span><br><span class="line"></span><br><span class="line">       ufw [--dry-run] status [verbose|numbered]</span><br><span class="line"></span><br><span class="line">       ufw [--dry-run] show REPORT</span><br><span class="line"></span><br><span class="line">       ufw [--dry-run] [delete] [insert NUM] [prepend] allow|deny|reject|<span class="built_in">limit</span> [<span class="keyword">in</span>|out] [<span class="built_in">log</span>|<span class="built_in">log</span>-all] [ PORT[/PROTOCOL] | APPNAME ] [comment COMMENT]</span><br><span class="line"></span><br><span class="line">       ufw [--dry-run] [rule] [delete] [insert NUM] [prepend] allow|deny|reject|<span class="built_in">limit</span> [<span class="keyword">in</span>|out [on INTERFACE]] [<span class="built_in">log</span>|<span class="built_in">log</span>-all] [proto PROTOCOL] [from ADDRESS [port PORT | app APPNAME ]] [to</span><br><span class="line">       ADDRESS [port PORT | app APPNAME ]] [comment COMMENT]</span><br><span class="line"></span><br><span class="line">       ufw [--dry-run] route [delete] [insert NUM] [prepend] allow|deny|reject|<span class="built_in">limit</span> [<span class="keyword">in</span>|out on INTERFACE] [<span class="built_in">log</span>|<span class="built_in">log</span>-all] [proto PROTOCOL] [from ADDRESS [port PORT  |  app  APPNAME]]  [to</span><br><span class="line">       ADDRESS [port PORT | app APPNAME]] [comment COMMENT]</span><br><span class="line"></span><br><span class="line">       ufw [--dry-run] delete NUM</span><br><span class="line"></span><br><span class="line">       ufw [--dry-run] app list|info|default|update</span><br><span class="line"></span><br><span class="line">OPTIONS</span><br><span class="line">       --version</span><br><span class="line">              show program<span class="string">'s version number and exit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       -h, --help</span></span><br><span class="line"><span class="string">              show help message and exit</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       --dry-run</span></span><br><span class="line"><span class="string">              don'</span>t modify anything, just show the changes</span><br><span class="line"></span><br><span class="line">       <span class="built_in">enable</span> reloads firewall and enables firewall on boot.</span><br><span class="line"></span><br><span class="line">       <span class="built_in">disable</span></span><br><span class="line">              unloads firewall and disables firewall on boot</span><br><span class="line"></span><br><span class="line">       reload reloads firewall</span><br><span class="line"></span><br><span class="line">       default allow|deny|reject DIRECTION</span><br><span class="line">              change  the  default  policy <span class="keyword">for</span> traffic going DIRECTION, <span class="built_in">where</span> DIRECTION is one of incoming, outgoing or routed. Note that existing rules will have to be migrated manually</span><br><span class="line">              when changing the default policy. See RULE SYNTAX <span class="keyword">for</span> more on deny and reject.</span><br><span class="line"></span><br><span class="line">       logging on|off|LEVEL</span><br><span class="line">              toggle logging. Logged packets use the LOG_KERN syslog facility. Systems configured <span class="keyword">for</span> rsyslog support may also <span class="built_in">log</span> to /var/<span class="built_in">log</span>/ufw.log. Specifying a LEVEL  turns  logging</span><br><span class="line">              on <span class="keyword">for</span> the specified LEVEL. The default <span class="built_in">log</span> level is <span class="string">'low'</span>.  See LOGGING <span class="keyword">for</span> details.</span><br><span class="line"></span><br><span class="line">       reset  Disables and resets firewall to installation defaults. Can also give the --force option to perform the reset without confirmation.</span><br><span class="line"></span><br><span class="line">       status show  status  of  firewall  and ufw managed rules. Use status verbose <span class="keyword">for</span> extra information. In the status output, <span class="string">'Anywhere'</span> is synonymous with <span class="string">'any'</span> and <span class="string">'0.0.0.0/0'</span>. Note</span><br><span class="line">              that when using status, there is a subtle difference when reporting interfaces. For example, <span class="keyword">if</span> the following rules are added:</span><br><span class="line"></span><br><span class="line">                ufw allow <span class="keyword">in</span> on eth0 from 192.168.0.0/16</span><br><span class="line">                ufw allow out on eth1 to 10.0.0.0/8</span><br><span class="line">                ufw route allow <span class="keyword">in</span> on eth0 out on eth1 to 10.0.0.0/8 from 192.168.0.0/16</span><br><span class="line">                ufw <span class="built_in">limit</span> 2222/tcp comment <span class="string">'SSH port'</span></span><br><span class="line"></span><br><span class="line">              ufw status will output:</span><br><span class="line"></span><br><span class="line">                To                         Action      From</span><br><span class="line">                --                         ------      ----</span><br><span class="line">                Anywhere on eth0           ALLOW       192.168.0.0/16</span><br><span class="line">                10.0.0.0/8                 ALLOW OUT   Anywhere on eth1</span><br><span class="line">                10.0.0.0/8 on eth1         ALLOW FWD   192.168.0.0/16 on eth0</span><br><span class="line">                Anywhere                   LIMIT       Anywhere                 <span class="comment"># SSH port</span></span><br><span class="line"></span><br><span class="line">              For the input and output rules, the interface is reported relative to the firewall system as an endpoint, whereas with route rules, the interface is  reported  relative  to</span><br><span class="line">              the direction packets flow through the firewall.</span><br><span class="line"></span><br><span class="line">       show REPORT</span><br><span class="line">              display information about the running firewall. See REPORTS</span><br><span class="line"></span><br><span class="line">       allow ARGS</span><br><span class="line">              add allow rule.  See RULE SYNTAX</span><br><span class="line"></span><br><span class="line">       deny ARGS</span><br><span class="line">              add deny rule.  See RULE SYNTAX</span><br><span class="line"></span><br><span class="line">       reject ARGS</span><br><span class="line">              add reject rule.  See RULE SYNTAX</span><br><span class="line"></span><br><span class="line">       <span class="built_in">limit</span> ARGS</span><br><span class="line">              add <span class="built_in">limit</span> rule.  Currently only IPv4 is supported.  See RULE SYNTAX</span><br><span class="line"></span><br><span class="line">       delete RULE|NUM</span><br><span class="line">              deletes the corresponding RULE</span><br><span class="line"></span><br><span class="line">       insert NUM RULE</span><br><span class="line">              insert the corresponding RULE as rule number NUM</span><br><span class="line"></span><br><span class="line">       prepend RULE</span><br><span class="line">              prepend the corresponding RULE to the top of the ruleset</span><br><span class="line"></span><br><span class="line">RULE SYNTAX</span><br><span class="line">       Users can specify rules using either a simple syntax or a full syntax. The simple syntax only specifies the port and optionally the protocol to be allowed or denied on the host.</span><br><span class="line"></span><br><span class="line">       Both syntaxes support specifying a comment <span class="keyword">for</span> the rule. For existing rules, specifying a different comment updates the comment and specifying <span class="string">''</span> removes the comment.</span><br><span class="line"></span><br><span class="line">       Example rules using the simple syntax:</span><br><span class="line"></span><br><span class="line">         ufw allow 53</span><br><span class="line"></span><br><span class="line">       This rule will allow tcp and udp port 53 to any address on this host. To specify a protocol, append <span class="string">'/protocol'</span> to the port. For example:</span><br><span class="line"></span><br><span class="line">         ufw allow 25/tcp</span><br><span class="line"></span><br><span class="line">       This will allow tcp port 25 to any address on this host. ufw will also check /etc/services <span class="keyword">for</span> the port and protocol <span class="keyword">if</span> specifying a service by name.  Eg:</span><br><span class="line"></span><br><span class="line">         ufw allow smtp</span><br><span class="line"></span><br><span class="line">       ufw  supports  both  ingress and egress filtering and users may optionally specify a direction of either <span class="keyword">in</span> or out <span class="keyword">for</span> either incoming or outgoing traffic. If no direction is sup‐</span><br><span class="line">       plied, the rule applies to incoming traffic. Eg:</span><br><span class="line"></span><br><span class="line">         ufw allow <span class="keyword">in</span> http</span><br><span class="line">         ufw reject out smtp</span><br><span class="line">         ufw reject telnet comment <span class="string">'telnet is unencrypted'</span></span><br><span class="line"></span><br><span class="line">       Users can also use a fuller syntax, specifying the <span class="built_in">source</span> and destination addresses and ports. This syntax is loosely based on OpenBSD<span class="string">'s PF syntax. For example:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw deny proto tcp to any port 80</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       This will deny all traffic to tcp port 80 on this host. Another example:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw deny proto tcp from 10.0.0.0/8 to 192.168.0.1 port 25</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       This will deny all traffic from the RFC1918 Class A network to tcp port 25 with the address 192.168.0.1.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw deny proto tcp from 2001:db8::/32 to any port 25</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       This will deny all traffic from the IPv6 2001:db8::/32 to tcp port 25 on this host. IPv6 must be enabled in /etc/default/ufw for IPv6 firewalling to work.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw deny in on eth0 to 224.0.0.1 proto igmp</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       This will deny all igmp traffic to 224.0.0.1 on the eth0 interface.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw allow in on eth0 to 192.168.0.1 proto gre</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       This will allow all gre traffic to 192.168.0.1 on the eth0 interface.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw allow proto tcp from any to any port 80,443,8080:8090 comment '</span>web app<span class="string">'</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       The above will allow all traffic to tcp ports 80, 443 and 8080-8090 inclusive and adds a comment for the rule. When specifying multiple ports, the ports list must be numeric, can‐</span></span><br><span class="line"><span class="string">       not  contain  spaces  and  must  be modified as a whole. Eg, in the above example you cannot later try to delete just the '</span>443<span class="string">' port. You cannot specify more than 15 ports (ranges</span></span><br><span class="line"><span class="string">       count as 2 ports, so the port count in the above example is 4).</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       ufw supports several different protocols. The following are valid in any rule and enabled when the protocol is not specified:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         tcp</span></span><br><span class="line"><span class="string">         udp</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       The following have certain restrictions and are not enabled when the protocol is not specified:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ah      valid without port number</span></span><br><span class="line"><span class="string">         esp     valid without port number</span></span><br><span class="line"><span class="string">         gre     valid without port number</span></span><br><span class="line"><span class="string">         ipv6    valid for IPv4 addresses and without port number</span></span><br><span class="line"><span class="string">         igmp    valid for IPv4 addresses and without port number</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       Rules for traffic not destined for the host itself but instead for traffic that should be routed/forwarded through the firewall should specify the route keyword  before  the  rule</span></span><br><span class="line"><span class="string">       (routing rules differ significantly from PF syntax and instead take into account netfilter FORWARD chain conventions). For example:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw route allow in on eth1 out on eth2</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       This will allow all traffic routed to eth2 and coming in on eth1 to traverse the firewall.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw route allow in on eth0 out on eth1 to 12.34.45.67 port 80 proto tcp</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       This rule allows any packets coming in on eth0 to traverse the firewall out on eth1 to tcp port 80 on 12.34.45.67.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       In addition to routing rules and policy, you must also setup IP forwarding.  This may be done by setting the following in /etc/ufw/sysctl.conf:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         net/ipv4/ip_forward=1</span></span><br><span class="line"><span class="string">         net/ipv6/conf/default/forwarding=1</span></span><br><span class="line"><span class="string">         net/ipv6/conf/all/forwarding=1</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       then restarting the firewall:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw disable</span></span><br><span class="line"><span class="string">         ufw enable</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       Be aware that setting kernel tunables is operating system specific and ufw sysctl settings may be overridden. See the sysctl manual page for details.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       ufw supports connection rate limiting, which is useful for protecting against brute-force login attacks. When a limit rule is used, ufw will normally allow the connection but will</span></span><br><span class="line"><span class="string">       deny connections if an IP address attempts to initiate 6 or more connections within 30 seconds. See http://www.debian-administration.org/articles/187 for  details.  Typical  usage</span></span><br><span class="line"><span class="string">       is:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw limit ssh/tcp</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       Sometimes it is desirable to let the sender know when traffic is being denied, rather than simply ignoring it. In these cases, use reject instead of deny.  For example:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw reject auth</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       By  default,  ufw  will apply rules to all available interfaces. To limit this, specify DIRECTION on INTERFACE, where DIRECTION is one of in or out (interface aliases are not sup‐</span></span><br><span class="line"><span class="string">       ported).  For example, to allow all new incoming http connections on eth0, use:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw allow in on eth0 to any port 80 proto tcp</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       To delete a rule, simply prefix the original rule with delete with or without the rule comment. For example, if the original rule was:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw deny 80/tcp</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       Use this to delete it:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw delete deny 80/tcp</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       You may also specify the rule by NUM, as seen in the status numbered output. For example, if you want to delete rule number '</span>3<span class="string">', use:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw delete 3</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       If you have IPv6 enabled and are deleting a generic rule that applies to both IPv4 and IPv6 (eg '</span>ufw allow 22/tcp<span class="string">'), deleting by rule number will delete only the  specified  rule.</span></span><br><span class="line"><span class="string">       To delete both with one command, prefix the original rule with delete.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       To  insert  a  rule,  specify the new rule as normal, but prefix the rule with the rule number to insert. For example, if you have four rules, and you want to insert a new rule as</span></span><br><span class="line"><span class="string">       rule number three, use:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">         ufw insert 3 deny to any port 22 from 10.0.0.135 proto tcp</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">       Similarly, to add a rule before all other rules matching the rule'</span>s IP <span class="built_in">type</span>, use the prepend rule:</span><br><span class="line"></span><br><span class="line">         ufw prepend deny from 1.2.3.4</span><br><span class="line"></span><br><span class="line">       This is particularly useful <span class="keyword">for</span> dynamic firewalls as found <span class="keyword">in</span> an IPS.  Importantly, <span class="keyword">if</span> the specified rule is an IPv4 rule, it will be prepended before all other IPv4 rules. If  it</span><br><span class="line">       is an IPv6 rule, it will be prepended before any IPv6 rules.</span><br><span class="line"></span><br><span class="line">       To see a list of numbered rules, use:</span><br><span class="line"></span><br><span class="line">         ufw status numbered</span><br><span class="line"></span><br><span class="line">       ufw  supports  per  rule logging. By default, no logging is performed when a packet matches a rule. Specifying <span class="built_in">log</span> will <span class="built_in">log</span> all new connections matching the rule, and <span class="built_in">log</span>-all will</span><br><span class="line">       <span class="built_in">log</span> all packets matching the rule.  For example, to allow and <span class="built_in">log</span> all new ssh connections, use:</span><br><span class="line"></span><br><span class="line">         ufw allow <span class="built_in">log</span> 22/tcp</span><br><span class="line"></span><br><span class="line">       See LOGGING <span class="keyword">for</span> more information on logging.</span><br><span class="line"></span><br><span class="line">EXAMPLES</span><br><span class="line">       Deny all access to port 53:</span><br><span class="line"></span><br><span class="line">         ufw deny 53</span><br><span class="line"></span><br><span class="line">       Allow all access to tcp port 80:</span><br><span class="line"></span><br><span class="line">         ufw allow 80/tcp</span><br><span class="line"></span><br><span class="line">       Allow all access from RFC1918 networks to this host:</span><br><span class="line"></span><br><span class="line">         ufw allow from 10.0.0.0/8</span><br><span class="line">         ufw allow from 172.16.0.0/12</span><br><span class="line">         ufw allow from 192.168.0.0/16</span><br><span class="line"></span><br><span class="line">       Deny access to udp port 514 from host 1.2.3.4:</span><br><span class="line"></span><br><span class="line">         ufw deny proto udp from 1.2.3.4 to any port 514</span><br><span class="line"></span><br><span class="line">       Allow access to udp 1.2.3.4 port 5469 from 1.2.3.5 port 5469:</span><br><span class="line"></span><br><span class="line">         ufw allow proto udp from 1.2.3.5 port 5469 to 1.2.3.4 port 5469</span><br><span class="line"></span><br><span class="line">REMOTE MANAGEMENT</span><br><span class="line">       When running ufw <span class="built_in">enable</span> or starting ufw via its initscript, ufw will flush its chains. This is required so ufw can maintain a consistent state, but it may  drop  existing  connec‐</span><br><span class="line">       tions (eg ssh). ufw does support adding rules before enabling the firewall, so administrators can <span class="keyword">do</span>:</span><br><span class="line"></span><br><span class="line">         ufw allow proto tcp from any to any port 22</span><br><span class="line"></span><br><span class="line">       before running <span class="string">'ufw enable'</span>. The rules will still be flushed, but the ssh port will be open after enabling the firewall. Please note that once ufw is <span class="string">'enabled'</span>, ufw will not flush</span><br><span class="line">       the chains when adding or removing rules (but will when modifying a rule or changing the default policy). By default, ufw will prompt when  enabling  the  firewall  <span class="keyword">while</span>  running</span><br><span class="line">       under ssh. This can be disabled by using <span class="string">'ufw --force enable'</span>.</span><br><span class="line"></span><br><span class="line">APPLICATION INTEGRATION</span><br><span class="line">       ufw supports application integration by reading profiles located <span class="keyword">in</span> /etc/ufw/applications.d. To list the names of application profiles known to ufw, use:</span><br><span class="line"></span><br><span class="line">         ufw app list</span><br><span class="line"></span><br><span class="line">       Users can specify an application name when adding a rule (quoting any profile names with spaces). For example, when using the simple syntax, users can use:</span><br><span class="line"></span><br><span class="line">         ufw allow &lt;name&gt;</span><br><span class="line"></span><br><span class="line">       Or <span class="keyword">for</span> the extended syntax:</span><br><span class="line"></span><br><span class="line">         ufw allow from 192.168.0.0/16 to any app &lt;name&gt;</span><br><span class="line"></span><br><span class="line">       You should not specify the protocol with either syntax, and with the extended syntax, use app <span class="keyword">in</span> place of the port clause.</span><br><span class="line"></span><br><span class="line">       Details on the firewall profile <span class="keyword">for</span> a given application can be seen with:</span><br><span class="line"></span><br><span class="line">         ufw app info &lt;name&gt;</span><br><span class="line"></span><br><span class="line">       <span class="built_in">where</span> <span class="string">'&lt;name&gt;'</span> is one of the applications seen with the app list <span class="built_in">command</span>.  Users may also specify all to see the profiles <span class="keyword">for</span> all known applications.</span><br><span class="line"></span><br><span class="line">       Syntax <span class="keyword">for</span> the application profiles is a simple .INI format:</span><br><span class="line"></span><br><span class="line">         [&lt;name&gt;]</span><br><span class="line">         title=&lt;title&gt;</span><br><span class="line">         description=&lt;description&gt;</span><br><span class="line">         ports=&lt;ports&gt;</span><br><span class="line"></span><br><span class="line">       The  <span class="string">'ports'</span>  field  may specify a <span class="string">'|'</span>-separated list of ports/protocols <span class="built_in">where</span> the protocol is optional. A comma-separated list or a range (specified with <span class="string">'start:end'</span>) may also be</span><br><span class="line">       used to specify multiple ports, <span class="keyword">in</span> <span class="built_in">which</span> <span class="keyword">case</span> the protocol is required. For example:</span><br><span class="line"></span><br><span class="line">         [SomeService]</span><br><span class="line">         title=Some title</span><br><span class="line">         description=Some description</span><br><span class="line">         ports=12/udp|34|56,78:90/tcp</span><br><span class="line"></span><br><span class="line">       In the above example, <span class="string">'SomeService'</span> may be used <span class="keyword">in</span> app rules and it specifies UDP port 12, TCP and UDP on port 34 and TCP ports 56 and 78-90 inclusive.</span><br><span class="line"></span><br><span class="line">       After creating or editing an application profile, users can run:</span><br><span class="line"></span><br><span class="line">         ufw app update &lt;name&gt;</span><br><span class="line"></span><br><span class="line">       This <span class="built_in">command</span> will automatically update the firewall with updated profile information. If specify <span class="string">'all'</span> <span class="keyword">for</span> name, <span class="keyword">then</span> all the profiles will be updated.  To update  a  profile  and</span><br><span class="line">       add a new rule to the firewall automatically, users can run:</span><br><span class="line"></span><br><span class="line">         ufw app update --add-new &lt;name&gt;</span><br><span class="line"></span><br><span class="line">       The behavior of the update --add-new <span class="built_in">command</span> can be configured using:</span><br><span class="line"></span><br><span class="line">         ufw app default &lt;policy&gt;</span><br><span class="line"></span><br><span class="line">       The  default  application  policy  is skip, <span class="built_in">which</span> means that the update --add-new <span class="built_in">command</span> will <span class="keyword">do</span> nothing. Users may also specify a policy of allow or deny so the update --add-new</span><br><span class="line">       <span class="built_in">command</span> may automatically update the firewall.  WARNING: it may be a security to risk to use a default allow policy <span class="keyword">for</span> application profiles. Carefully consider the security rami‐</span><br><span class="line">       fications before using a default allow policy.</span><br><span class="line"></span><br><span class="line">LOGGING</span><br><span class="line">       ufw supports multiple logging levels. ufw defaults to a loglevel of <span class="string">'low'</span> when a loglevel is not specified. Users may specify a loglevel with:</span><br><span class="line"></span><br><span class="line">         ufw logging LEVEL</span><br><span class="line"></span><br><span class="line">       LEVEL may be <span class="string">'off'</span>, <span class="string">'low'</span>, <span class="string">'medium'</span>, <span class="string">'high'</span> and <span class="string">'full'</span>. Log levels are defined as:</span><br><span class="line"></span><br><span class="line">       off    disables ufw managed logging</span><br><span class="line"></span><br><span class="line">       low    logs all blocked packets not matching the defined policy (with rate limiting), as well as packets matching logged rules</span><br><span class="line"></span><br><span class="line">       medium <span class="built_in">log</span> level low, plus all allowed packets not matching the defined policy, all INVALID packets, and all new connections.  All logging is <span class="keyword">done</span> with rate limiting.</span><br><span class="line"></span><br><span class="line">       high   <span class="built_in">log</span> level medium (without rate limiting), plus all packets with rate limiting</span><br><span class="line"></span><br><span class="line">       full   <span class="built_in">log</span> level high without rate limiting</span><br><span class="line"></span><br><span class="line">       Loglevels above medium generate a lot of logging output, and may quickly fill up your disk. Loglevel medium may generate a lot of logging output on a busy system.</span><br><span class="line"></span><br><span class="line">       Specifying <span class="string">'on'</span> simply enables logging at <span class="built_in">log</span> level <span class="string">'low'</span> <span class="keyword">if</span> logging is currently not enabled.</span><br><span class="line"></span><br><span class="line">REPORTS</span><br><span class="line">       The following reports are supported. Each is based on the live system and with the exception of the listening report, is <span class="keyword">in</span> raw iptables format:</span><br><span class="line"></span><br><span class="line">         raw</span><br><span class="line">         builtins</span><br><span class="line">         before-rules</span><br><span class="line">         user-rules</span><br><span class="line">         after-rules</span><br><span class="line">         logging-rules</span><br><span class="line">         listening</span><br><span class="line">         added</span><br><span class="line"></span><br><span class="line">       The raw report shows the complete firewall, <span class="keyword">while</span> the others show a subset of what is <span class="keyword">in</span> the raw report.</span><br><span class="line"></span><br><span class="line">       The  listening  report  will  display  the ports on the live system <span class="keyword">in</span> the listening state <span class="keyword">for</span> tcp and the open state <span class="keyword">for</span> udp, along with the address of the interface and the exe‐</span><br><span class="line">       cutable listening on the port. An <span class="string">'*'</span> is used <span class="keyword">in</span> place of the address of the interface when the executable is bound to all interfaces on that port. Following this information is a</span><br><span class="line">       list of rules <span class="built_in">which</span> may affect connections on this port. The rules are listed <span class="keyword">in</span> the order they are evaluated by the kernel, and the first match wins. Please note that the default</span><br><span class="line">       policy is not listed and tcp6 and udp6 are shown only <span class="keyword">if</span> IPV6 is enabled.</span><br><span class="line"></span><br><span class="line">       The added report displays the list of rules as they were added on the <span class="built_in">command</span>-line. This report does not show the status of  the  running  firewall  (use  <span class="string">'ufw  status'</span>  instead).</span><br><span class="line">       Because  rules  are normalized by ufw, rules may look different than the originally added rule. Also, ufw does not record <span class="built_in">command</span> ordering, so an equivalent ordering is used <span class="built_in">which</span></span><br><span class="line">       lists IPv6-only rules after other rules.</span><br><span class="line"></span><br><span class="line">NOTES</span><br><span class="line">       On installation, ufw is disabled with a default incoming policy of deny, a default forward policy of deny, and a default outgoing policy of allow, with stateful tracking  <span class="keyword">for</span>  NEW</span><br><span class="line">       connections <span class="keyword">for</span> incoming and forwarded connections.  In addition to the above, a default ruleset is put <span class="keyword">in</span> place that does the following:</span><br><span class="line"></span><br><span class="line">       - DROP packets with RH0 headers</span><br><span class="line"></span><br><span class="line">       - DROP INVALID packets</span><br><span class="line"></span><br><span class="line">       -  ACCEPT  certain  icmp packets (INPUT and FORWARD): destination-unreachable, <span class="built_in">source</span>-quench, time-exceeded, parameter-problem, and <span class="built_in">echo</span>-request <span class="keyword">for</span> IPv4. destination-unreachable,</span><br><span class="line">       packet-too-big, time-exceeded, parameter-problem, and <span class="built_in">echo</span>-request <span class="keyword">for</span> IPv6.</span><br><span class="line"></span><br><span class="line">       - ACCEPT icmpv6 packets <span class="keyword">for</span> stateless autoconfiguration (INPUT)</span><br><span class="line"></span><br><span class="line">       - ACCEPT ping replies from IPv6 link-local (ffe8::/10) addresses (INPUT)</span><br><span class="line"></span><br><span class="line">       - ACCEPT DHCP client traffic (INPUT)</span><br><span class="line"></span><br><span class="line">       - DROP non-local traffic (INPUT)</span><br><span class="line"></span><br><span class="line">       - ACCEPT mDNS (zeroconf/bonjour/avahi 224.0.0.251 <span class="keyword">for</span> IPv4 and ff02::fb <span class="keyword">for</span> IPv6) <span class="keyword">for</span> service discovery (INPUT)</span><br><span class="line"></span><br><span class="line">       - ACCEPT UPnP (239.255.255.250 <span class="keyword">for</span> IPv4 and ff02::f <span class="keyword">for</span> IPv6) <span class="keyword">for</span> service discovery (INPUT)</span><br><span class="line"></span><br><span class="line">       Rule ordering is important and the first match wins. Therefore when adding rules, add the more specific rules first with more general rules later.</span><br><span class="line"></span><br><span class="line">       ufw is not intended to provide complete firewall functionality via its <span class="built_in">command</span> interface, but instead provides an easy way to add or remove simple rules.</span><br><span class="line"></span><br><span class="line">       The status <span class="built_in">command</span> shows basic information about the state of the firewall, as well as rules managed via the ufw <span class="built_in">command</span>. It does not show rules from the rules files <span class="keyword">in</span>  /etc/ufw.</span><br><span class="line">       To see the complete state of the firewall, users can ufw show raw.  This displays the filter, nat, mangle and raw tables using:</span><br><span class="line"></span><br><span class="line">         iptables -n -L -v -x -t &lt;table&gt;</span><br><span class="line">         ip6tables -n -L -v -x -t &lt;table&gt;</span><br><span class="line"></span><br><span class="line">       See the iptables and ip6tables documentation <span class="keyword">for</span> more details.</span><br><span class="line"></span><br><span class="line">       If the default policy is <span class="built_in">set</span> to REJECT, ufw may interfere with rules added outside of the ufw framework. See README <span class="keyword">for</span> details.</span><br><span class="line"></span><br><span class="line">       IPV6  is  allowed  by  default.  To  change  this behavior to only accept IPv6 traffic on the loopback interface, <span class="built_in">set</span> IPV6 to <span class="string">'no'</span> <span class="keyword">in</span> /etc/default/ufw and reload ufw. When IPv6 is</span><br><span class="line">       enabled, you may specify rules <span class="keyword">in</span> the same way as <span class="keyword">for</span> IPv4 rules, and they will be displayed with ufw status. Rules that match both IPv4 and IPv6 addresses apply to both  IP  ver‐</span><br><span class="line">       sions. For example, when IPv6 is enabled, the following rule will allow access to port 22 <span class="keyword">for</span> both IPv4 and IPv6 traffic:</span><br><span class="line"></span><br><span class="line">         ufw allow 22</span><br><span class="line"></span><br><span class="line">       IPv6 over IPv4 tunnels and 6to4 are supported by using the <span class="string">'ipv6'</span> protocol (<span class="string">'41'</span>). This protocol can only be used with the full syntax. For example:</span><br><span class="line"></span><br><span class="line">         ufw allow to 10.0.0.1 proto ipv6</span><br><span class="line">         ufw allow to 10.0.0.1 from 10.4.0.0/16 proto ipv6</span><br><span class="line"></span><br><span class="line">       IPSec is supported by using the <span class="string">'esp'</span> (<span class="string">'50'</span>) and <span class="string">'ah'</span> (<span class="string">'51'</span>) protocols. These protocols can only be used with the full syntax. For example:</span><br><span class="line"></span><br><span class="line">         ufw allow to 10.0.0.1 proto esp</span><br><span class="line">         ufw allow to 10.0.0.1 from 10.4.0.0/16 proto esp</span><br><span class="line">         ufw allow to 10.0.0.1 proto ah</span><br><span class="line">         ufw allow to 10.0.0.1 from 10.4.0.0/16 proto ah</span><br><span class="line"></span><br><span class="line">       In  addition  to  the <span class="built_in">command</span>-line interface, ufw also provides a framework <span class="built_in">which</span> allows administrators to modify default behavior as well as take full advantage of netfilter. See</span><br><span class="line">       the ufw-framework manual page <span class="keyword">for</span> more information.</span><br><span class="line"></span><br><span class="line">SEE ALSO</span><br><span class="line">       ufw-framework(8), iptables(8), ip6tables(8), iptables-restore(8), ip6tables-restore(8), sysctl(8), sysctl.conf(5)</span><br><span class="line"></span><br><span class="line">AUTHOR</span><br><span class="line">       ufw is Copyright 2008-2014, Canonical Ltd.</span><br><span class="line"></span><br><span class="line">       ufw and this manual page was originally written by Jamie Strandboge &lt;jamie@canonical.com&gt;</span><br></pre></td></tr></table></figure>

</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">码聚</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://liaoyu.online/2020/05/29/ubuntu-ufw/">https://liaoyu.online/2020/05/29/ubuntu-ufw/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/ubuntu/">ubuntu</a><a class="post-meta__tags" href="/tags/%E9%98%B2%E7%81%AB%E5%A2%99/">防火墙</a></div><div class="post_share"><div class="social-share" data-image="https://images.unsplash.com/photo-1484480974693-6ca0a78fb36b?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=1352&amp;q=80" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/06/09/install-jupyter-python-kernel/"><img class="prev_cover lazyload" data-src="https://images.unsplash.com/reserve/LJIZlzHgQ7WPSh5KVTCB_Typewriter.jpg?ixlib=rb-1.2.1&amp;ixid=eyJhcHBfaWQiOjEyMDd9&amp;auto=format&amp;fit=crop&amp;w=682&amp;q=80" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Previous Post</div><div class="prev_info">安装好jupyterhub后， 该如何安装我们需要的 ipython kernel 呢</div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> Comment</span></div><div id="gitalk-container"></div><script>var gitalk = new Gitalk({
  clientID: 'f26f59165b5cdfcf5573',
  clientSecret: 'cd6474287fc867fb15a995d2cec3b9615b14293b',
  repo: 'stephen-a2z.github.io',
  owner: 'stephen-a2z',
  admin: ['Stephen-a2z'],
  id: md5(decodeURI(location.pathname)),
  language: 'zh-CN,en',
  perPage: 10,
  distractionFreeMode: true,
  pagerDirection: 'last',
  createIssueManually: false,
  updateCountCallback: commentCount
})
gitalk.render('gitalk-container')

function commentCount(n){
  try {
    document.getElementsByClassName('gitalk-comment-count')[0].innerHTML= n
  } catch (e) {
    return false
  }
}</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2021 By 码聚</div><div class="framework-info"><span>Driven </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div><div class="icp"><a href="http://www.beian.miit.gov.cn" target="_blank" rel="noopener"><img class="icp-icon" src="/img/icp.png"/><span>蜀ICP备19024787号-2</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">简</a><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="Scroll to comment"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script><script src="/js/third-party/ClickShowText.js"></script></body></html>